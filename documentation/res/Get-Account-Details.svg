<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2339px" preserveAspectRatio="none" style="width:1169px;height:2339px;" version="1.1" viewBox="0 0 1169 2339" width="1169px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ots6xmr1edt2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="2324.4258" style="stroke: #A80036; stroke-width: 1.0;" width="147" x="282.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="315.5" y="16.5684">Account API</text><rect fill="#90EE90" height="2324.4258" style="stroke: #A80036; stroke-width: 1.0;" width="619.5" x="521.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="788.75" y="16.5684">Microservice</text><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="1705.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="96.4883"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="96.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="596" y="213.375"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="96.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="775.5" y="732.582"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="96.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="947" y="1243.4785"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="1571.6211" style="stroke: #000000; stroke-width: 2.0;" width="898" x="259" y="174.9316"/><rect fill="#FFFFFF" height="1037.1035" style="stroke: none; stroke-width: 1.0;" width="898" x="259" y="709.4492"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="534.5176" style="stroke: #000000; stroke-width: 2.0;" width="870.5" x="276.5" y="1205.0352"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="31" x2="31" y1="86.4883" y2="2241.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="355.5" x2="355.5" y1="86.4883" y2="2241.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="600.5" x2="600.5" y1="86.4883" y2="2241.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="780.5" x2="780.5" y1="86.4883" y2="2241.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="951.5" x2="951.5" y1="86.4883" y2="2241.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1098" x2="1098" y1="86.4883" y2="2241.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="8" y="83.5352">Client</text><ellipse cx="31" cy="13" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M31,21 L31,48 M18,29 L44,29 M31,48 L18,63 M31,48 L44,63 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="8" y="2254.4727">Client</text><ellipse cx="31" cy="2267.4258" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M31,2275.4258 L31,2302.4258 M18,2283.4258 L44,2283.4258 M31,2302.4258 L18,2317.4258 M31,2302.4258 L44,2317.4258 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="286.5" y="83.5352">Get Account Details</text><path d="M335.5,42 L335.5,66 M335.5,54 L352.5,54 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="364.5" cy="54" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="286.5" y="2254.4727">Get Account Details</text><path d="M335.5,2261.4258 L335.5,2285.4258 M335.5,2273.4258 L352.5,2273.4258 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="364.5" cy="2273.4258" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="525.5" y="83.5352">Account Microservice</text><path d="M580.5,42 L580.5,66 M580.5,54 L597.5,54 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="609.5" cy="54" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="525.5" y="2254.4727">Account Microservice</text><path d="M580.5,2261.4258 L580.5,2285.4258 M580.5,2273.4258 L597.5,2273.4258 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="609.5" cy="2273.4258" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="182" x="686.5" y="83.5352">Subscriptions Microservice</text><path d="M760,42 L760,66 M760,54 L777,54 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="789" cy="54" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="182" x="686.5" y="2254.4727">Subscriptions Microservice</text><path d="M760,2261.4258 L760,2285.4258 M760,2273.4258 L777,2273.4258 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="789" cy="2273.4258" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="884.5" y="83.5352">Fraud Microservice</text><path d="M931.5,42 L931.5,66 M931.5,54 L948.5,54 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="960.5" cy="54" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="884.5" y="2254.4727">Fraud Microservice</text><path d="M931.5,2261.4258 L931.5,2285.4258 M931.5,2273.4258 L948.5,2273.4258 " fill="none" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="960.5" cy="2273.4258" fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1059" y="83.5352">Cassandra</text><path d="M1080,34 C1080,24 1098,24 1098,24 C1098,24 1116,24 1116,34 L1116,60 C1116,70 1098,70 1098,70 C1098,70 1080,70 1080,60 L1080,34 " fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1080,34 C1080,44 1098,44 1098,44 C1098,44 1116,44 1116,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1059" y="2254.4727">Cassandra</text><path d="M1080,2267.4258 C1080,2257.4258 1098,2257.4258 1098,2257.4258 C1098,2257.4258 1116,2257.4258 1116,2267.4258 L1116,2293.4258 C1116,2303.4258 1098,2303.4258 1098,2303.4258 C1098,2303.4258 1080,2303.4258 1080,2293.4258 L1080,2267.4258 " fill="#FEFECE" filter="url(#f1ots6xmr1edt2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1080,2267.4258 C1080,2277.4258 1098,2277.4258 1098,2277.4258 C1098,2277.4258 1116,2277.4258 1116,2267.4258 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="1705.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="96.4883"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="96.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="596" y="213.375"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="96.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="775.5" y="732.582"/><rect fill="#FFFFFF" filter="url(#f1ots6xmr1edt2)" height="96.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="947" y="1243.4785"/><polygon fill="#A80036" points="339,113.6211,349,117.6211,339,121.6211,343,117.6211" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="345" y1="117.6211" y2="117.6211"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="38" y="112.5552">GET /v1/customer/accounts/{accountId}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="403" y1="146.9316" y2="146.9316"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="403" x2="403" y1="146.9316" y2="159.9316"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="362" x2="403" y1="159.9316" y2="159.9316"/><polygon fill="#A80036" points="372,155.9316,362,159.9316,372,163.9316,368,159.9316" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="368" y="142.1895">Check authorization</text><path d="M259,174.9316 L327,174.9316 L327,181.9316 L317,191.9316 L259,191.9316 L259,174.9316 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1571.6211" style="stroke: #000000; stroke-width: 2.0;" width="898" x="259" y="174.9316"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="274" y="188.5">par</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="594" x2="584" y1="213.375" y2="209.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="594" x2="584" y1="213.375" y2="217.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="595" y1="213.375" y2="213.375"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="368" y="208.3091">GET /v1/account/{accountId}</text><path d="M366,226.375 L366,251.375 L481,251.375 L481,236.375 L471,226.375 L366,226.375 " fill="#FBFB77" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M471,226.375 L471,236.375 L481,236.375 L471,226.375 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="372" y="243.6196">apiKey</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="424" y="243.9434">header</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1096" x2="1086" y1="281.9961" y2="277.9961"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1096" x2="1086" y1="281.9961" y2="285.9961"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="606" x2="1097" y1="281.9961" y2="281.9961"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="613" y="277.2539">Fetch account details</text><polygon fill="#A80036" points="617,291.9961,607,295.9961,617,299.9961,613,295.9961" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="611" x2="1097" y1="295.9961" y2="295.9961"/><polygon fill="#A80036" points="372,305.9961,362,309.9961,372,313.9961,368,309.9961" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="600" y1="309.9961" y2="309.9961"/><path d="M269,322.9961 L269,699.9961 L592,699.9961 L592,332.9961 L582,322.9961 L269,322.9961 " fill="#FBFB77" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M582,322.9961 L582,332.9961 L592,332.9961 L582,322.9961 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="275" y="340.5645">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="291" y="355.875">"accountsDetails": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="307" y="371.1855">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="323" y="386.4961">"accountNumber": "694762329",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="323" y="401.8066">"accountType": "Consumer",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="323" y="417.1172">"accountSubType": "Regular",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="323" y="432.4277">"activeFrom": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="323" y="447.7383">"consolidatedAccountInd": false,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="323" y="463.0488">"accountStatus": "OPEN",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="323" y="478.3594">"reasonCode": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="323" y="493.6699">"fraudInd": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="323" y="508.9805">"lineOfBussiness": "WL",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="323" y="524.291">"accountEventLastTs": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="323" y="539.6016">"franchiseCode": "Rogers",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="323" y="554.9121">"customerBillingProfileId": "804737093",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="323" y="570.2227">"consolidatedAccountNumber": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="323" y="585.5332">"IDVInd": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="323" y="600.8438">"ecId": "29517889"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="307" y="616.1543">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="291" y="631.4648">],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="291" y="646.7754">"billingAddress": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="307" y="662.0859">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="291" y="677.3965">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="275" y="692.707">}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="259" x2="1157" y1="710.4492" y2="710.4492"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="773.5" x2="763.5" y1="732.582" y2="728.582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="773.5" x2="763.5" y1="732.582" y2="736.582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="774.5" y1="732.582" y2="732.582"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="368" y="727.5161">GET /v1/subscriptions/{accountId}</text><path d="M366,745.582 L366,770.582 L481,770.582 L481,755.582 L471,745.582 L366,745.582 " fill="#FBFB77" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M471,745.582 L471,755.582 L481,755.582 L471,745.582 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="372" y="762.8267">apiKey</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="424" y="763.1504">header</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1096" x2="1086" y1="801.2031" y2="797.2031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1096" x2="1086" y1="801.2031" y2="805.2031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="785.5" x2="1097" y1="801.2031" y2="801.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="792.5" y="796.4609">Fetch subscriptions</text><polygon fill="#A80036" points="796.5,811.2031,786.5,815.2031,796.5,819.2031,792.5,815.2031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="790.5" x2="1097" y1="815.2031" y2="815.2031"/><polygon fill="#A80036" points="372,825.2031,362,829.2031,372,833.2031,368,829.2031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="779.5" y1="829.2031" y2="829.2031"/><path d="M423,842.2031 L423,1188.2031 L771,1188.2031 L771,852.2031 L761,842.2031 L423,842.2031 " fill="#FBFB77" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M761,842.2031 L761,852.2031 L771,852.2031 L761,842.2031 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="429" y="859.7715">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="445" y="875.082">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="461" y="890.3926">"accountNumber": "694762329",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="461" y="905.7031">"subscriptionType": "CTN",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="461" y="921.0137">"subscriptionNo": "4168777698",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="461" y="936.3242">"reasonCode": "CA  ",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="461" y="951.6348">"currentPlanName": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="461" y="966.9453">"dmEligibilityIndicator": false,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="295" x="461" y="982.2559">"effectiveDate": "2019-06-20 20:00:00-0400",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="461" y="997.5664">"futurePlanName": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="461" y="1012.877">"ppcEffectiveDate": null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="461" y="1028.1875">"familyShareStatus": "",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="461" y="1043.498">"status": "Active",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="461" y="1058.8086">"userName": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="477" y="1074.1191">"firstName": "Ali",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="477" y="1089.4297">"lastName": "Karteek"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="461" y="1104.7402">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="461" y="1120.0508">"subscriptionAddress": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="477" y="1135.3613">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="461" y="1150.6719">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="445" y="1165.9824">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="429" y="1181.293">]</text><path d="M276.5,1205.0352 L343.5,1205.0352 L343.5,1212.0352 L333.5,1222.0352 L276.5,1222.0352 L276.5,1205.0352 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="534.5176" style="stroke: #000000; stroke-width: 2.0;" width="870.5" x="276.5" y="1205.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="291.5" y="1218.6035">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="358.5" y="1217.6699">[OVF client]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="945" x2="935" y1="1243.4785" y2="1239.4785"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="945" x2="935" y1="1243.4785" y2="1247.4785"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="946" y1="1243.4785" y2="1243.4785"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="368" y="1238.4126">GET /v1/fraud/{accountId}</text><path d="M366,1256.4785 L366,1281.4785 L481,1281.4785 L481,1266.4785 L471,1256.4785 L366,1256.4785 " fill="#FBFB77" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M471,1256.4785 L471,1266.4785 L481,1266.4785 L471,1256.4785 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="372" y="1273.7231">apiKey</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="424" y="1274.0469">header</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1096" x2="1086" y1="1312.0996" y2="1308.0996"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1096" x2="1086" y1="1312.0996" y2="1316.0996"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="957" x2="1097" y1="1312.0996" y2="1312.0996"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="964" y="1307.3574">Fetch fraud details</text><polygon fill="#A80036" points="968,1322.0996,958,1326.0996,968,1330.0996,964,1326.0996" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="962" x2="1097" y1="1326.0996" y2="1326.0996"/><polygon fill="#A80036" points="372,1336.0996,362,1340.0996,372,1344.0996,368,1340.0996" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="951" y1="1340.0996" y2="1340.0996"/><path d="M639,1353.0996 L639,1730.0996 L943,1730.0996 L943,1363.0996 L933,1353.0996 L639,1353.0996 " fill="#FBFB77" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M933,1353.0996 L933,1363.0996 L943,1363.0996 L933,1353.0996 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="645" y="1370.668">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="661" y="1385.9785">"accountFraudDetails": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="677" y="1401.2891">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="693" y="1416.5996">"accountNumber": "921530473",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="693" y="1431.9102">"reasonCode": "CA  ",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="693" y="1447.2207">"accountStatus": "SUSPENDED",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="693" y="1462.5313">"fraudInd": false,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="693" y="1477.8418">"subscriptionFraudDetails": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="709" y="1493.1523">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="725" y="1508.4629">"subscriptionId": "4167320116",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="725" y="1523.7734">"reasonCode": "CLM ",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="725" y="1539.084">"status": "Suspended",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="725" y="1554.3945">"fraudSocInd": false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="709" y="1569.7051">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="709" y="1585.0156">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="725" y="1600.3262">"subscriptionId": "4167320667",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="725" y="1615.6367">"reasonCode": "CA  ",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="725" y="1630.9473">"status": "Active",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="725" y="1646.2578">"fraudSocInd": false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="709" y="1661.5684">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="693" y="1676.8789">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="677" y="1692.1895">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="661" y="1707.5">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="645" y="1722.8105">}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="403" y1="1774.8633" y2="1774.8633"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="403" x2="403" y1="1774.8633" y2="1787.8633"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="362" x2="403" y1="1787.8633" y2="1787.8633"/><polygon fill="#A80036" points="372,1783.8633,362,1787.8633,372,1791.8633,368,1787.8633" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="368" y="1770.1211">Combine and Map</text><polygon fill="#A80036" points="42,1797.8633,32,1801.8633,42,1805.8633,38,1801.8633" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36" x2="355" y1="1801.8633" y2="1801.8633"/><path d="M106,1814.8633 L106,2222.8633 L347,2222.8633 L347,1824.8633 L337,1814.8633 L106,1814.8633 " fill="#FBFB77" filter="url(#f1ots6xmr1edt2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M337,1814.8633 L337,1824.8633 L347,1824.8633 L337,1814.8633 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="112" y="1832.4316">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="128" y="1847.7422">"accountNumber": "694762329",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="128" y="1863.0527">"state": "Active",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="128" y="1878.3633">"status": "Open",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="128" y="1893.6738">"type": "Consumer",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="128" y="1908.9844">"subtype": "Regular",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="128" y="1924.2949">"isFraudulent": true,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="128" y="1939.6055">"activationDate": "2019-06-20",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="128" y="1954.916">"services": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="144" y="1970.2266">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="160" y="1985.5371">"category": "Wireless",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="160" y="2000.8477">"type": "Non-Shared",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="160" y="2016.1582">"number": "4168777698",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="160" y="2031.4688">"name": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="176" y="2046.7793">"firstName": "Ali",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="176" y="2062.0898">"lastName": "Karteek"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="2077.4004">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="160" y="2092.7109">"links": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="176" y="2108.0215">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="160" y="2123.332">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="144" y="2138.6426">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="2153.9531">],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="128" y="2169.2637">"links": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="144" y="2184.5742">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="128" y="2199.8848">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="112" y="2215.1953">}</text><!--
@startuml

actor Client

box "Account API" #LightBlue
    boundary "Get Account Details" as AccountDetails
end box

box "Microservice" #LightGreen
    boundary "Account Microservice" as Account
    boundary "Subscriptions Microservice" as Subscriptions
    boundary "Fraud Microservice" as Fraud
    database Cassandra
end box

activate AccountDetails

Client -> AccountDetails: ""GET /v1/customer/accounts/{accountId}""

AccountDetails -> AccountDetails: Check authorization

par

AccountDetails ->> Account: ""GET /v1/account/{accountId}""

activate Account
note right of AccountDetails : ""apiKey"" header

Account ->> Cassandra: Fetch account details
Account <- - Cassandra

AccountDetails <- - Account
note left of Account
{
    "accountsDetails": [
        {
            "accountNumber": "694762329",
            "accountType": "Consumer",
            "accountSubType": "Regular",
            "activeFrom": null,
            "consolidatedAccountInd": false,
            "accountStatus": "OPEN",
            "reasonCode": null,
            "fraudInd": null,
            "lineOfBussiness": "WL",
            "accountEventLastTs": null,
            "franchiseCode": "Rogers",
            "customerBillingProfileId": "804737093",
            "consolidatedAccountNumber": null,
            "IDVInd": null,
            "ecId": "29517889"
        }
    ],
    "billingAddress": {
        ...
    }
}
end note

deactivate Account

else

AccountDetails ->> Subscriptions: ""GET /v1/subscriptions/{accountId}""

activate Subscriptions
note right of AccountDetails : ""apiKey"" header

Subscriptions ->> Cassandra: Fetch subscriptions
Subscriptions <- - Cassandra

AccountDetails <- - Subscriptions
note left of Subscriptions
[
    {
        "accountNumber": "694762329",
        "subscriptionType": "CTN",
        "subscriptionNo": "4168777698",
        "reasonCode": "CA  ",
        "currentPlanName": null,
        "dmEligibilityIndicator": false,
        "effectiveDate": "2019-06-20 20:00:00-0400",
        "futurePlanName": null,
        "ppcEffectiveDate": null,
        "familyShareStatus": "",
        "status": "Active",
        "userName": {
            "firstName": "Ali",
            "lastName": "Karteek"
        },
        "subscriptionAddress": {
            ...
        }
    }
]
end note

deactivate Subscriptions

opt OVF client

AccountDetails ->> Fraud: ""GET /v1/fraud/{accountId} ""

activate Fraud
note right of AccountDetails : ""apiKey"" header

Fraud ->> Cassandra: Fetch fraud details
Fraud <- - Cassandra

AccountDetails <- - Fraud
note left of Fraud
{
    "accountFraudDetails": [
        {
            "accountNumber": "921530473",
            "reasonCode": "CA  ",
            "accountStatus": "SUSPENDED",
            "fraudInd": false,
            "subscriptionFraudDetails": [
                {
                    "subscriptionId": "4167320116",
                    "reasonCode": "CLM ",
                    "status": "Suspended",
                    "fraudSocInd": false
                },
                {
                    "subscriptionId": "4167320667",
                    "reasonCode": "CA  ",
                    "status": "Active",
                    "fraudSocInd": false
                }
            ]
        }
    ]
}
end note

deactivate Fraud

end

end

AccountDetails -> AccountDetails: Combine and Map

Client <- - AccountDetails
note left of AccountDetails
{
    "accountNumber": "694762329",
    "state": "Active",
    "status": "Open",
    "type": "Consumer",
    "subtype": "Regular",
    "isFraudulent": true,
    "activationDate": "2019-06-20",
    "services": [
        {
            "category": "Wireless",
            "type": "Non-Shared",
            "number": "4168777698",
            "name": {
                "firstName": "Ali",
                "lastName": "Karteek"
            },
            "links": [
                ...
            ]
        }
    ],
    "links": [
        ...
    ]
}
end note

deactivate AccountDetails

@enduml

PlantUML version 1.2018.13(Mon Nov 26 12:11:51 EST 2018)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 11.0.2+9-LTS
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: CA
--></g></svg>